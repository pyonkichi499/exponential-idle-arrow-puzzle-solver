# 既知の問題と制限事項

## 画像認識（自動解法機能）

### 現在の状態
画像認識機能（`auto-solve`コマンド）は現在**概念実証**の段階であり、実際のExponential Idleのゲームプレイではテストされていません。

### 制限事項

1. **数字認識**
   - 実際のゲームグラフィックスに対して調整されていない単純なピクセル比率を使用
   - `vision.py`内のしきい値はプレースホルダー値
   - 実際のゲームでは数字を正しく認識できない可能性が高い

2. **グリッド検出**
   - 輪郭検出はすべてのゲーム解像度やテーマで機能しない可能性
   - 明確な境界を持つ正方形グリッドを前提
   - 部分的に表示されたパズルやUIオーバーレイへの対応なし

3. **未実装の機能**
   - 実際のゲームアセットを使用したテンプレートマッチングなし
   - OCR実装なし
   - 堅牢な数字認識のための機械学習モデルなし
   - 異なるゲームテーマや配色への対応なし

### 必要な作業

自動解法機能を本番環境で使用可能にするには：

1. **ゲームアセットのキャプチャ**
   - 実際のゲームから各数字（0-4）のスクリーンショットを撮影
   - 異なる解像度でのサンプルをキャプチャ
   - ゲームに複数のテーマがある場合はそれらも考慮

2. **適切な認識の実装**
   - ピクセル比率法を以下のいずれかに置き換え：
     - 実際の数字画像を使用したテンプレートマッチング
     - pytesseractを使用したOCR
     - 数字認識用の小規模CNNの訓練

3. **グリッド検出の改善**
   - 様々なゲーム解像度でテスト
   - エッジケース（部分的な表示、UIオーバーレイ）への対応
   - 検出されたグリッド境界の視覚的フィードバックを追加

4. **キャリブレーションツール**
   - ユーザーが自分の環境に合わせて認識を調整できるツールの作成
   - 将来の使用のためのキャリブレーションデータの保存

### 回避策

画像認識が適切に実装されるまで、ユーザーは以下の方法を使用できます：
- 手動入力方法（テキスト入力付きの`solve`コマンド）を使用
- 開発に役立つ実際のゲームスクリーンショットを提供
- `PuzzleDetector`クラスを拡張して独自の認識方法を実装

## その他の既知の問題

### アルゴリズムの制限
- `cli.py`のデモパズルが現在解けないことから、アルゴリズムがすべてのパズル構成を処理できない可能性
- 現在の実装ですべての可能なパズルが解けることの保証なし

### パフォーマンス
- 大きなパズル（7x7以上）は十分にテストされていない
- 複数のパズルを連続して解く際の最適化なし